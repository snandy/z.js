/*!
 * Z.js v0.1.0
 * @snandy 2014-04-24 18:04:49
 *
 */
Z.declareUI("Dragdrop",function(){var t=Z(window),e=Z(document);e[0];var n=Z.Function,i=/^xy$/;this.init=function(t,e){this.elem=Z.isElement(t)?t:Z(t)[0],this.reset(e),this.dragObj.data("originData",Z.extend({},e));var i=n.bind(this.onMousedown,this);this.downObj.mousedown(function(t){i(t)})},this.reset=function(t){this.handle=t.handle,this.canDrag=t.canDrag!==!1,this.axis=t.axis||"xy",this.area=t.area||[],this.inwin=t.inwin||!1,this.cursor=t.cursor||"move",this.zIndex=t.zIndex||"",this.dragObj=Z(this.elem),this.downObj=this.handle?this.dragObj.find(this.handle):this.dragObj,this.downObj.css("cursor",this.cursor)},this.onMousedown=function(i){var r=this.dragObj[0];this.dragObj.css("position","absolute");var s=Z.viewSize();if(this.dragElemWidth=Math.max(r.offsetWidth,r.clientWidth),this.dragElemHeight=Math.max(r.offsetHeight,r.clientHeight),this.dragElemMarginTop=parseInt(r.style.marginTop,10)||0,this.dragElemMarginLeft=parseInt(r.style.marginLeft,10)||0,this.inwin){var a=s.width-this.dragElemWidth,o=s.height-this.dragElemHeight;this.area=[0,a,0,o]}var u=n.bind(this.onMousemove,this);this.mouseup=n.bind(this.onMouseup,this),this.mousemove=function(t){u(t)},window.captureEvents?(i.stopPropagation(),i.preventDefault(),t.blur(this.mouseup)):r.setCapture&&(r.setCapture(),i.cancelBubble=!0,this.dragObj.on("losecapture",this.mouseup)),this.diffX=i.clientX-r.offsetLeft,this.diffY=i.clientY-r.offsetTop,e.mousemove(this.mousemove),e.mouseup(this.mouseup),this.fire("start")},this.onMousemove=function(t){var e,n,r,s,a=t.clientX-this.diffX,o=t.clientY-this.diffY,u=this.dragObj,c=u[0],l=this.area;if(this.area&&(e=l[0],n=l[1],r=l[2],s=l[3],e>a&&(a=e),a>n&&(a=n),r>o&&(o=r),o>s&&(o=s)),this.canDrag){var f=this.axis;a-=this.dragElemMarginTop,o-=this.dragElemMarginLeft,("x"===f||i.test(f))&&(c.style.left=a+"px"),("y"===f||i.test(f))&&(c.style.top=o+"px")}this.fire("drag",a,o)},this.onMouseup=function(){var n=this.dragObj[0];e.off("mousemove",this.mousemove),e.off("mouseup",this.mouseup),window.releaseEvents?t.off("blur",this.mouseup):dargElem.releaseCapture&&(dragObj.off("losecapture",this.mouseup),n.releaseCapture()),this.fire("end")},this.stopDrag=function(){this.canDrag=!1},this.startDrag=function(){this.canDrag=!0},this.setAxis=function(t){this.axis=t}}),Z.declareUI("Tab",function(){Z.Function,this.init=function(t,e){var e=e||{};this.elem=Z.isElement(t)?t:Z(t)[0],this.eventType=e.eventType||"mouseover",this.currClass=e.currClass||"curr",this.autoPlay=e.autoPlay||!1,this.interval=e.interval||5e3,this.currIndex=e.currIndex||0,this.attrName=e.attrName||"data-ui",this.tabNavVal=e.tabNavVal||"tab-nav",this.tabConVal=e.tabConVal||"tab-content";var n=this.attrName,i=this.tabNavVal,r=this.tabConVal,s=this.elemObj=Z(this.elem),a=this.navObj=s.find("["+n+"="+i+"]"),o=this.contentObj=s.find("["+n+"="+r+"]");if(a.length!=o.length)throw Error("navObj and contentObj length must be equal");this.length=a.length,this.currIndex&&(a.removeClass(this.currClass),o.hide(),this.change(this.currIndex)),this.autoPlay&&this.play();var u=this;s.delegate("["+n+"="+i+"]",this.eventType,function(){var t=a.index(this);u.change(t)})},this.change=function(t){var e=this.navObj,n=this.contentObj,i=this.currClass,r=e.eq(t),s=n.eq(t);this._preNav=this._preNav?this._preNav:r,this._preCon=this._preCon?this._preCon:s,this._preNav.removeClass(i),r.addClass(i),this._preNav=r,this._preCon.hide(),s.show(),this._preCon=s,this.currIndex=t,this.fire("change",t)},this.play=function(){var t=this;this.timer=setInterval(function(){var e=t.currIndex+1;e===t.length&&(e=0),t.change(e)},this.interval)},this.stop=function(){clearInterval(this.timer)}}),Z.declareUI("Suggest",function(){function t(t,e){var n=document.createElement(t);return e&&(n.className=e),Z(n)}this.init=function(e,n){var e=this.input=Z(e);this.ulCls=n.ulCls||"",this.liCls=n.liCls||"suggest-li",this.currCls=n.currCls||"curr",this.url=n.url||"",this.data=n.data||[],this.buildLi=n.buildLi,this.currLi=null;var i=this.getInputPosition();this.div=t("div","suggest-div").hide(),this.div.css({position:"absolute",top:i.top+e[0].offsetHeight-1,left:i.left,width:e[0].offsetWidth-2}),this.ul=t("ul",n.ulCls),this.div[0].appendChild(this.ul[0]),document.body.appendChild(this.div[0]);var r=this;this.input.on("keyup",function(t){""===e.value?r.hide():r.onKeyup(t)})},this.getInputPosition=function(){return this.input.offset()},this.hide=function(){this.div.hide()},this.show=function(){this.div.show()},this.render=function(){this.ul.empty(),Z.each(this.data,function(e){var n=t("li",this.liCls);n.attr("data-val",e),Z.isFunction(this.buildLi)?n.html(this.buildLi(e)):n.html(e),this.ul[0].appendChild(n[0])},this),this.visible=!0,this.show()},this.onKeyup=function(t){this.div;var e=this.ul[0],n=this.input,i=this.liCls,r=this.currCls;if(this.visible)switch(t.keyCode){case 13:return this.currLi&&(n.value=this.currLi.firstChild.data,this.hide()),void 0;case 38:return null==this.currLi?(this.currLi=e.lastChild,this.currLi.className=r,n.val(this.currLi.firstChild.data)):null!=this.currLi.previousSibling?(this.currLi.className=i,this.currLi=this.currLi.previousSibling,this.currLi.className=r,n.val(this.currLi.firstChild.data)):(this.currLi.className=i,this.currLi=null,n[0].focus(),n.val(this.finalValue)),void 0;case 40:return null==this.currLi?(this.currLi=e.firstChild,this.currLi.className=r,n.val(this.currLi.firstChild.data)):null!=this.currLi.nextSibling?(this.currLi.className=i,this.currLi=this.currLi.nextSibling,this.currLi.className=r,n.val(this.currLi.firstChild.data)):(this.currLi.className=i,this.currLi=null,n[0].focus(),n.val(this.finalValue)),void 0;case 27:return this.hide(),n.val(this.finalValue),void 0}this.lis=[];var s=n.val();this.finalValue!==s&&(this.render(),this.finalValue=s)}});